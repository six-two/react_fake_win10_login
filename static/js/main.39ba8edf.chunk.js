(this.webpackJsonpreact_fake_win10_login=this.webpackJsonpreact_fake_win10_login||[]).push([[0],{14:function(e,t,n){e.exports=n.p+"static/media/background.0099788b.jpg"},23:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(10),i=n.n(s),o=n(4);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(1),l=n(2),u=n(3),d=n(6),p=n(5),h=n(21),E=n.n(h),m=n(22),v=n.n(m),f=n(11);function g(e,t){switch(e||(console.warn("No state was supplied to reducer. Falling back to default values"),e=b),t.type){case"INITIAL_SETUP":var n=t.payload;return{const:n,var:_(n.initialScreen,y,n),isSetupDone:!0,fullscreen:Object(c.a)(Object(c.a)({},e.fullscreen),{},{requested:!0})};case"SET_SETUP_DONE":var a=t.payload;return Object(c.a)(Object(c.a)({},e),{},{isSetupDone:a});case"SET_FULLSCREEN_IS_ACTIVE":var r=t.payload;return Object(c.a)(Object(c.a)({},e),{},{fullscreen:{requested:r,active:r}});case"SET_FULLSCREEN_IS_REQUESTED":var s=t.payload;return Object(c.a)(Object(c.a)({},e),{},{fullscreen:Object(c.a)(Object(c.a)({},e.fullscreen),{},{requested:s})});default:return Object(c.a)(Object(c.a)({},e),{},{var:T(e.var,t,e.const)})}}function T(e,t,n){return e=function(e,t,n){switch(t.type){case"SET_SCREEN":return _(t.payload,e,n);case"RESET_STATE":return _(y.screen.name,y,n)}return e}(e=function(e,t){return t.type,e}(e,t),t,n)}function _(e,t,n){var a="SCREEN_SUSPEND"===e||"SCREEN_COVER"===e?t.screen.name:null;return Object(c.a)(Object(c.a)({},t),{},{screen:{name:e,changeTime:new Date},previousScreen:a})}var w={checkLoginCredentialsUrl:"http://localhost:3333/login.json?u=<username>&p=<password>",checkDecryptionPasswordUrl:"http://localhost:3333/disk.json?p=<password>",validLoginUsernameRegex:RegExp("^.+$"),validLoginPasswordRegex:RegExp("^.+$"),validDecryptionPasswordRegex:RegExp("^$"),serverRequestTimeout:2,initialScreen:"SCREEN_LOGIN",coverUrl:"https://www.google.com/webhp?igu=1",coverFakeUrl:"/www.google.com",coverFakeTitle:"Google"},y={screen:{name:"SCREEN_LOGIN",changeTime:new Date},login:{username:"",password:"",openMenu:null,failed:!1,attempts:0},previousScreen:null,isFinished:!1},b={const:w,var:y,isSetupDone:!1,fullscreen:{requested:!1,active:!1}},S=void 0;if(window.__REDUX_DEVTOOLS_EXTENSION__){S=window.__REDUX_DEVTOOLS_EXTENSION__({trace:!1,traceLimit:25})}var O=Object(f.b)(g,b,S),R=O;function L(e){R.dispatch(e)}function U(e){L({type:"SET_LOGIN_OPEN_MENU",payload:e})}function P(e){L({type:"SET_SETUP_DONE",payload:e})}var N=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isFullscreen;return!0===this.props.alwaysShowContents&&(e=!0),r.a.createElement("div",null,r.a.createElement(v.a,{handleKeys:["ctrl+space"],handleFocusableElements:!0,onKeyEvent:function(){L({type:"SET_FULLSCREEN_IS_REQUESTED",payload:!0})}}),r.a.createElement(E.a,{enabled:this.props.requestFullscreen,onChange:function(e){L({type:"SET_FULLSCREEN_IS_ACTIVE",payload:e})}},e&&this.props.children))}}]),n}(a.Component),k=Object(o.b)((function(e,t){return Object(c.a)(Object(c.a)({},t),{},{requestFullscreen:e.fullscreen.requested,isFullscreen:e.fullscreen.active})}))(N),j=n(14),I=n.n(j);var C=[I.a].filter((function(e){return!e.startsWith("data:image")}));function M(e){return r.a.createElement("img",{key:e,src:e,alt:""})}function x(){return r.a.createElement("div",{className:"preload-images"},C.map(M))}var D=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).closeMenu=function(){e.props.isMenuOpen&&U(null)},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-login"},r.a.createElement("img",{className:"fill-screen",src:I.a,alt:""}),r.a.createElement("div",{className:"fill-screen v-flex",onClick:this.closeMenu},r.a.createElement("div",{className:"expand"}),this.props.children,r.a.createElement("div",{className:"expand"})))}}]),n}(r.a.Component),Y=Object(o.b)((function(e,t){return Object(c.a)(Object(c.a)({},t),{},{isMenuOpen:null!==e.var.login.openMenu})}))(D),A=n(17),G=n.n(A),F=function(){return r.a.createElement("div",{className:"screen-login-locked v-flex"},r.a.createElement("div",{className:"expand"}),r.a.createElement("div",{className:"clock"},r.a.createElement("div",{className:"clock-time"},r.a.createElement(G.a,{format:"HH:mm"})),r.a.createElement("div",{className:"clock-date"},r.a.createElement(G.a,{format:"dddd, D MMMM"}))))};function q(e){e.preventDefault(),e.stopPropagation()}var X=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-manager fill-screen",onContextMenu:q},this.renderContent())}},{key:"renderContent",value:function(){switch(this.props.screen){case"SCREEN_LOGIN":return r.a.createElement(Y,null,r.a.createElement(F,null));default:return r.a.createElement("h1",{style:{color:"red"}},'Unknown screen: "'.concat(this.props.screen,'"'))}}}]),n}(r.a.Component),K=Object(o.b)((function(e,t){return Object(c.a)(Object(c.a)({},t),{},{screen:e.var.screen.name})}))(X);function B(e){var t=R.getState().const.coverUrl;return r.a.createElement("div",{className:"screen-cover"},r.a.createElement("iframe",{className:"fill-screen",title:"unknown",src:t}))}var H=n(8);function V(e){var t=e.errorMessage?" has-error":"";return r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"label",title:e.description},e.name,e.canBeEmpty&&r.a.createElement("abbr",{title:"Leave this field empty to disable this feature"},"*")),r.a.createElement("div",{className:"value-and-error"+t},r.a.createElement("div",{className:"value"},e.children),e.errorMessage&&r.a.createElement("div",{className:"error"},e.errorMessage)))}var W=n(7);function $(e){return"TYPE_STRING_OR_NULL"===e||"TYPE_TIMEOUT_OR_NULL"===e||"TYPE_TEMPLATE_URL_PASS"===e||"TYPE_TEMPLATE_URL_USER_PASS"===e}function J(e,t){if(!$(e)&&!t)return"Empty field is not allowed";switch(e){case"TYPE_STRING":case"TYPE_STRING_OR_NULL":return null;case"TYPE_TIMEOUT_OR_NULL":case"TYPE_TIMEOUT":return"TYPE_TIMEOUT_OR_NULL"!==e||t?function(e){var t=Number(e);if(isNaN(t))return"Not a valid number";if(t<0)return"Number can not be negative";return null}(t):null;case"TYPE_TEMPLATE_URL_PASS":case"TYPE_TEMPLATE_URL_USER_PASS":var n=["<password>"];return"TYPE_TEMPLATE_URL_USER_PASS"===e&&n.push("<username>"),function(e,t){try{new URL(e)}catch(s){return"Unvalid URL format"}var n,a=Object(W.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(e.indexOf(r)<0)return'The url should contain the placeholder "'.concat(r,'"')}}catch(i){a.e(i)}finally{a.f()}return null}(t,n);case"TYPE_REGEX":return function(e){try{return new RegExp(e),null}catch(t){return"Not a valid regular expression"}}(t);default:return console.error('Unknown type: "'.concat(e,'"')),"Internal error: unknown type"}}var Q,z=[{title:"Grub greeting message",name:"grubGreetingDuration",description:"Defines how long the 'Welcome to GRUB!' message is shown",type:"TYPE_TIMEOUT"},{title:"Kernel load",name:"kernelLoadDuration",description:"Defines how long to wait after the 'Loading Linux <your_kernel_version_here> ...' line",type:"TYPE_TIMEOUT"},{title:"Initial ramdisk load",name:"initrdLoadDuration",description:"Defines how long to wait after the 'Loading initial ramdisk ...' line",type:"TYPE_TIMEOUT"},{title:"Kali boot animation",name:"plymountDuration",description:"Determines how long the boot animation should be shown",type:"TYPE_TIMEOUT"},{title:"Kali logo during shutdown",name:"shutdownDuration",description:"Sets how long the kali logo is shown before the computer is shut down",type:"TYPE_TIMEOUT"}],Z=[{title:"Hostname",name:"hostname",description:"The hostname of the Kali Linux. It is shown on the login screen.",type:"TYPE_STRING"},{title:"Initial screen",name:"initialScreen",description:"Select which state the computer should start in",type:"TYPE_INITIAL_SCREEN"},{title:"Grub timeout",name:"bootTimeout",description:"If the user does not press a key after X seconds, the first boot menu entry gets executed automatically",type:"TYPE_TIMEOUT_OR_NULL"},{title:"Crypt device (root partition)",name:"cryptDevice",description:"The name of the encrypted partition. Setting this option will cause the decrypt disk screen to be shown",type:"TYPE_STRING_OR_NULL"}],ee=[{title:"Check disk password URL",name:"checkDecryptionPasswordUrl",description:"The URL to send a request to when the user tries to decrypt the disk",type:"TYPE_TEMPLATE_URL_PASS"},{title:"Check login URL",name:"checkLoginCredentialsUrl",description:"The URL to send a request to when the user tries to log in",type:"TYPE_TEMPLATE_URL_USER_PASS"},{title:"Server verification timeout",name:"serverRequestTimeout",description:"How long to wait for a response from the server, before falling back on the regular expression check. Setting the value too high can cause a visible delay if the server is not reachable / responding",type:"TYPE_TIMEOUT"}],te=[{title:"Decryption password",name:"validDecryptionPasswordRegex",description:"Accept the disk password if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login username",name:"validLoginUsernameRegex",description:"Accept the login username if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login password",name:"validLoginPasswordRegex",description:"Accept the login password if it matches this regular expression",type:"TYPE_REGEX"}],ne=[].concat(Z,z,ee,te),ae=new Map,re=Object(W.a)(ne);try{for(re.s();!(Q=re.n()).done;){var se=Q.value;ae.set(se.name,se)}}catch(Ee){re.e(Ee)}finally{re.f()}function ie(e){return{checkLoginCredentialsUrl:oe(e.checkLoginCredentialsUrl),checkDecryptionPasswordUrl:oe(e.checkDecryptionPasswordUrl),serverRequestTimeout:(t=e.serverRequestTimeout,""+t),validLoginUsernameRegex:ce(e.validLoginUsernameRegex),validLoginPasswordRegex:ce(e.validLoginPasswordRegex),validDecryptionPasswordRegex:ce(e.validDecryptionPasswordRegex)};var t}function oe(e){return e||""}function ce(e){return e.source}function le(e){return e||null}var ue=ie(w),de=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).renderGenericSetting=function(e){var t=a.state.settings[e.name],n=ue[e.name],s=J(e.type,t),i=$(e.type);return r.a.createElement(V,{key:e.name,name:e.title,canBeEmpty:i,errorMessage:s,description:e.description},function(e,t,n,a){switch(e){case"TYPE_REGEX":case"TYPE_STRING":case"TYPE_STRING_OR_NULL":case"TYPE_TIMEOUT":case"TYPE_TIMEOUT_OR_NULL":case"TYPE_TEMPLATE_URL_PASS":case"TYPE_TEMPLATE_URL_USER_PASS":return r.a.createElement("input",{value:n,onChange:function(e){a(e.target.value)},placeholder:t});default:return console.error('Unknown type: "'.concat(e,'"')),r.a.createElement("div",null,"ERROR: Unknown input type")}}(e.type,n,t,(function(t){var n=Object(c.a)({},a.state.settings);n[e.name]=t,a.setState({settings:n})})))},a.state={settings:ie(e.constants)},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=function(e){e=Object(c.a)({},e);var t=window.location.hash;if(t){var n,a,r=new URLSearchParams(t.substr(1)),s=Object(W.a)(r.entries());try{for(s.s();!(a=s.n()).done;){var i=Object(H.a)(a.value,2),o=i[0],l=i[1];"null"===(l=decodeURIComponent(l))&&(l=""),"setup"===o?n=l:void 0!==e[o]?(console.log("Using url parameter: ".concat(o," -> ").concat(l)),e[o]=l):console.warn("Unknown url parameter: ".concat(o))}}catch(Ee){s.e(Ee)}finally{s.f()}return{settings:e,skipSetup:"skip"===n}}return null}(this.state.settings);e&&this.setState({settings:e.settings})}},{key:"getParamString",value:function(){for(var e=[],t=0,n=Object.entries(this.state.settings);t<n.length;t++){var a=Object(H.a)(n[t],2),r=a[0],s=a[1];""===(s=encodeURIComponent(s))&&(s="null"),e.push("".concat(r,"=").concat(s))}return e.join("&")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"setup"},r.a.createElement("h1",null,"Setup"),"Here you can configure the Kali Linux simulation. Or just skip this step by pressing the ",r.a.createElement("code",null,"Start"),' button. Fields marked with a "',"*",'" can be left empty to diable said feature.',r.a.createElement("button",{onClick:function(){return e.start(e.state.settings,!0)}},"Skip setup"),r.a.createElement("h2",null,"General settings"),this.renderSettings(Z),r.a.createElement("h2",null,"Timing settings"),"All values below are measured in seconds. Negative values are not allowed.",this.renderSettings(z),r.a.createElement("h2",null,"Credential settings"),'These settings can be used to specify the credentials that a user can use to sucessfully "log in". They can also be used to extract the user credentials (via the url fields).',this.renderSettings(ee),r.a.createElement("h2",null,"Local credential verification"),"If the server defined above can not be reached or does not respond in time, these fields will be used to verify the credentials. The fields accept regular expressions, which are a powerful way to match text. If you are not familiar with them go check out this",r.a.createElement("a",{href:"https://www.computerhope.com/unix/regex-quickref.htm"},"quick start guide to regular expressions"),".",this.renderSettings(te),r.a.createElement("button",{onClick:function(){return e.start(e.state.settings,!0)}},"Start"),"//TODO add reset to defaults button")}},{key:"renderSettings",value:function(e){return r.a.createElement("div",{className:"settings"},e.map(this.renderGenericSetting))}},{key:"start",value:function(e,t){if(function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=Object(H.a)(n[t],2),r=a[0],s=a[1],i=ae.get(r);if(i){if(J(i.type,s)){var o='The value you supplied for "'.concat(r,'" is not valid!');return console.log(o),!1}}else console.warn('No input verification defined for "'.concat(r,'"'))}return!0}(e)){var n=function(e){var t=Object(c.a)({},w);return t.checkDecryptionPasswordUrl=le(e.checkDecryptionPasswordUrl),t.checkLoginCredentialsUrl=le(e.checkLoginCredentialsUrl),t.serverRequestTimeout=Number(e.serverRequestTimeout),t}(e);return window.location.hash="",function(e){document.title=e.coverFakeTitle,window.history.pushState({stage:"simulation"},"",e.coverFakeUrl),L({type:"INITIAL_SETUP",payload:e})}(n),!0}return t&&alert("Please check your inputs. At least one of them has an invalid value"),!1}}]),n}(r.a.Component),pe=(n(39),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(x,null),r.a.createElement(k,{alwaysShowContents:!0},this.renderContent()))}},{key:"renderContent",value:function(){return this.props.showSetup?r.a.createElement(de,{constants:this.props.constants}):this.props.isRunning&&this.props.isFullscreen?r.a.createElement(K,null):r.a.createElement(B,null)}}]),n}(r.a.Component)),he=Object(o.b)((function(e,t){return Object(c.a)(Object(c.a)({},t),{},{isRunning:!e.var.isFinished,isFullscreen:e.fullscreen.active,showSetup:!e.isSetupDone,constants:e.const})}))(pe);window.addEventListener("popstate",(function(e){e.state&&e.state.stage?P(!0):P(!1),console.log("[Event: popstate] state: "+JSON.stringify(e.state))})),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:O},r.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.39ba8edf.chunk.js.map