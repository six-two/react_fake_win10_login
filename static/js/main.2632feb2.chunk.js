(this.webpackJsonpreact_fake_win10_login=this.webpackJsonpreact_fake_win10_login||[]).push([[0],{18:function(e,t,n){e.exports=n.p+"static/media/background.0099788b.jpg"},19:function(e,t,n){e.exports=n.p+"static/media/user.b34dc68a.png"},28:function(e,t,n){e.exports=n(46)},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),o=n.n(s),c=n(2);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(1),l=n(3),u=n(4),d=n(15),p=n(6),m=n(5),E=n(14);var v=n(18),h=n.n(v),f=n(19),g=n.n(f);var b=[h.a,g.a].filter((function(e){return!e.startsWith("data:image")}));function O(e){return r.a.createElement("img",{key:e,src:e,alt:""})}function w(){return r.a.createElement("div",{className:"preload-images"},b.map(O))}function _(e,t){switch(e||(console.warn("No state was supplied to reducer. Falling back to default values"),e=L),t.type){case"INITIAL_SETUP":var n=t.payload,a=S((n=Object(i.a)(Object(i.a)({},n),{},{users:n.users.map((function(e){var t=e.iconUrl?e.iconUrl:g.a;return Object(i.a)(Object(i.a)({},e),{},{iconUrl:t})}))})).initialScreen,U,n);return{const:n,var:a=y(n,a),isSetupDone:!0,fullscreen:Object(i.a)(Object(i.a)({},e.fullscreen),{},{requested:!1})};case"SET_SETUP_DONE":var r=t.payload;return Object(i.a)(Object(i.a)({},e),{},{isSetupDone:r});case"SET_FULLSCREEN_IS_ACTIVE":var s=t.payload;return Object(i.a)(Object(i.a)({},e),{},{fullscreen:{requested:s,active:s}});case"SET_FULLSCREEN_IS_REQUESTED":var o=t.payload;return Object(i.a)(Object(i.a)({},e),{},{fullscreen:Object(i.a)(Object(i.a)({},e.fullscreen),{},{requested:o})});default:return Object(i.a)(Object(i.a)({},e),{},{var:T(e.var,t,e.const)})}}function T(e,t,n){return e=function(e,t,n){switch(t.type){case"SET_SCREEN":var a=t.payload;e=S(a,e,n);break;case"RESET_STATE":e=S(U.screen.name,U,n);break;case"SELECT_USER":e=y(n,e)}return e}(e=function(e,t){switch(t.type){case"SELECT_USER":var n=t.payload;return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{selectedUser:Object(i.a)(Object(i.a)({},e.login.selectedUser),{},{index:n}),password:""})});case"SET_LOGIN_PASSWORD":var a=t.payload;return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{password:a})});case"SET_REVEAL_PASSWORD":var r=t.payload;return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{revealPassword:r})});case"TRY_LOGIN":var s=t.payload,o=Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{revealPassword:!1,failed:!s,attempts:e.login.attempts+1}),isFinished:s});return s||(o.login.password=""),o;default:return e}}(e,t),t,n)}function y(e,t){var n=t.login.selectedUser.index,a=e.users[n];return Object(i.a)(Object(i.a)({},t),{},{login:Object(i.a)(Object(i.a)({},t.login),{},{selectedUser:{index:n,name:a.name,iconUrl:a.iconUrl}})})}function S(e,t,n){var a="SCREEN_SUSPEND"===e||"SCREEN_COVER"===e?t.screen.name:null;return Object(i.a)(Object(i.a)({},t),{},{screen:{name:e,changeTime:new Date},previousScreen:a})}var R={users:[{name:"Test 123",iconUrl:"https://i.ytimg.com/vi/B9gjMJ4rTJw/maxresdefault.jpg"},{name:"User",iconUrl:""}],checkLoginCredentialsUrl:"http://localhost:3333/login.json?u=<username>&p=<password>",checkDecryptionPasswordUrl:"http://localhost:3333/disk.json?p=<password>",validLoginUsernameRegex:RegExp("^.+$"),validLoginPasswordRegex:RegExp("^.+$"),validDecryptionPasswordRegex:RegExp("^$"),serverRequestTimeout:2,initialScreen:"SCREEN_LOCKED",coverUrl:"https://www.google.com/webhp?igu=1",coverFakeUrl:"/www.google.com",coverFakeTitle:"Google"},U={screen:{name:"SCREEN_LOCKED",changeTime:new Date},login:{selectedUser:{index:0,name:"",iconUrl:""},revealPassword:!1,password:"",openMenu:null,failed:!1,attempts:0},previousScreen:null,isFinished:!1},L={const:R,var:U,isSetupDone:!1,fullscreen:{requested:!1,active:!1}},j=void 0;if(window.__REDUX_DEVTOOLS_EXTENSION__){j=window.__REDUX_DEVTOOLS_EXTENSION__({trace:!1,traceLimit:25})}var N=Object(E.b)(_,L,j),P=N;function x(e){P.dispatch(e)}function k(e){x({type:"SET_REVEAL_PASSWORD",payload:e})}function I(e){x({type:"SET_LOGIN_OPEN_MENU",payload:e})}function C(e){x({type:"SET_SCREEN",payload:e})}function D(e){document.title=e.coverFakeTitle,window.history.pushState({stage:"simulation"},"",e.coverFakeUrl),x({type:"INITIAL_SETUP",payload:e})}function M(e){x({type:"SET_SETUP_DONE",payload:e})}var A=n(27),Y=n.n(A),F=n(8),G=n.n(F),q=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isFullscreen;return!0===this.props.alwaysShowContents&&(e=!0),r.a.createElement("div",null,r.a.createElement(G.a,{handleKeys:["ctrl+space"],handleFocusableElements:!0,onKeyEvent:function(){x({type:"SET_FULLSCREEN_IS_REQUESTED",payload:!0})}}),r.a.createElement(Y.a,{enabled:this.props.requestFullscreen,onChange:function(e){x({type:"SET_FULLSCREEN_IS_ACTIVE",payload:e})}},e&&this.props.children))}}]),n}(a.Component),K=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{requestFullscreen:e.fullscreen.requested,isFullscreen:e.fullscreen.active})}))(q),W=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).closeMenu=function(){e.props.isMenuOpen&&I(null)},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-login"},r.a.createElement("img",{className:"fill-screen",src:h.a,alt:""}),r.a.createElement("div",{className:"fill-screen v-flex",onClick:this.closeMenu},r.a.createElement("div",{className:"expand"}),this.props.children,r.a.createElement("div",{className:"expand h-flex"},r.a.createElement("div",{className:"expand"}),r.a.createElement("div",{className:"button-bar"},"Internet, Battery","Keyboard layout, WIFI, Accessibility, Power (Sleep, Shut down, Restart)"))))}}]),n}(r.a.Component),V=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{isMenuOpen:null!==e.var.login.openMenu})}))(W),X=n(22),B=n.n(X),H=function(){return r.a.createElement("div",{className:"screen-login-locked v-flex"},r.a.createElement(G.a,{handleKeys:["all"],handleFocusableElements:!0,onKeyEvent:function(){return C("SCREEN_LOGIN")}}),r.a.createElement("div",{className:"expand"}),r.a.createElement("div",{className:"clock"},r.a.createElement("div",{className:"clock-time"},r.a.createElement(B.a,{format:"HH:mm"})),r.a.createElement("div",{className:"clock-date"},r.a.createElement(B.a,{format:"dddd, D MMMM"}))))},J=n(7),$=n.n(J),z=n(11),Q=n(23);function Z(){return(Z=Object(z.a)($.a.mark((function e(t){var n,a,r,s,o,c,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.var.login.selectedUser.name,a=t.var.login.password,r=t.const.checkLoginCredentialsUrl,s=t.const.serverRequestTimeout,null===r){e.next=12;break}return e.next=7,ee(ne(r,n,a),s);case 7:if(null===(o=e.sent)){e.next=10;break}return e.abrupt("return",o);case 10:e.next=14;break;case 12:return e.next=14,oe(1e3);case 14:return c=Boolean(n.match(t.const.validLoginUsernameRegex)),i=Boolean(a.match(t.const.validLoginPasswordRegex)),console.log("Comparing login credentials to regex.\n - validUsername: ".concat(c,"\n - validPassword: ").concat(i)),e.abrupt("return",c&&i);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(z.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n&&n>0)){e.next=8;break}return a=Math.round(1e3*n),e.next=5,Object(Q.timeout)(t,a);case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,t;case 10:return e.abrupt("return",e.sent);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.t0 instanceof Q.TimeoutError?console.info("Promise timed out after ".concat(n," seconds")):console.error("Promise resulted in error:",e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ne(e,t,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(z.a)($.a.mark((function e(t,n,a){var r,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace("<password>",a),null!==n&&(r=r.replace("<username>",n)),console.log('Checking credentials via url: "'.concat(r,'"')),e.next=5,re(r);case 5:return s=e.sent,o=s&&void 0!==s.isValid?s.isValid:null,console.log("Server response:",o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return se.apply(this,arguments)}function se(){return(se=Object(z.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((n=e.sent).ok){e.next=7;break}return console.error('HTTP request failed: url="'.concat(t,'" response_status: "').concat(n.statusText,'"')),e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function oe(e){return new Promise((function(t){return setTimeout(t,e)}))}var ce=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{selectedIndex:e.var.login.selectedUser.index,users:e.const.users})}))((function(e){return e.users.length<2?null:r.a.createElement("div",{className:"user-list"},e.users.map((function(t,n){var a,s="entry";return n===e.selectedIndex?s+=" selected":(s+=" not-selected",a=function(e){x({type:"SELECT_USER",payload:n})}),r.a.createElement("div",{key:n,className:s,onClick:a},r.a.createElement("img",{className:"icon",src:t.iconUrl,alt:""}),r.a.createElement("div",{className:"name"},t.name))})))})),ie=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{user:e.var.login.selectedUser,revealPassword:e.var.login.revealPassword,password:e.var.login.password,failedLogin:e.var.login.failed,reduxState:e})}))((function(e){var t=e.revealPassword?"text":"password",n=e.password,a=function(t){(function(e){return Z.apply(this,arguments)})(e.reduxState).then((function(e){x({type:"TRY_LOGIN",payload:e})}))},s=function(t){e.revealPassword&&k(!1)};return r.a.createElement("div",{className:"password-dialog"},r.a.createElement("div",{className:"user-icon"},r.a.createElement("img",{src:e.user.iconUrl,alt:""})),r.a.createElement("div",{className:"user-name"},r.a.createElement("span",null,e.user.name)),r.a.createElement(G.a,{handleKeys:["enter"],onKeyEvent:a},r.a.createElement("div",{className:"password-div h-flex"},r.a.createElement("div",{className:"password-wrapper h-flex"},r.a.createElement("input",{type:t,value:e.password,onChange:function(e){x({type:"SET_LOGIN_PASSWORD",payload:e.target.value})},placeholder:"Password",autoFocus:!0,autoComplete:"off"}),n&&r.a.createElement("div",{className:"button reveal",onMouseDown:function(e){return k(!0)},onMouseUp:s,onMouseLeave:s},r.a.createElement("span",{role:"img","aria-label":"show"},"\ud83d\udc41\ufe0f"))),r.a.createElement("div",{className:"button login",onClick:a},r.a.createElement("span",{role:"img","aria-label":"go"},"\ud83e\udc62")))),e.failedLogin&&r.a.createElement("div",{className:"reset-password"},r.a.createElement("span",{onClick:function(e){return C("SCREEN_PASSWORD_RESET")}},"Reset password")),r.a.createElement(ce,null))}));function le(e){0}var ue=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-manager fill-screen",onContextMenu:le},this.renderContent())}},{key:"renderContent",value:function(){switch(this.props.screen){case"SCREEN_LOCKED":return r.a.createElement(V,null,r.a.createElement(H,null));case"SCREEN_LOGIN":return r.a.createElement(V,null,r.a.createElement(ie,null));default:return r.a.createElement("h1",{style:{color:"red"}},'Unknown screen: "'.concat(this.props.screen,'"'))}}}]),n}(r.a.Component),de=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{screen:e.var.screen.name})}))(ue);var pe=n(10);function me(e){var t=e.errorMessage?" has-error":"";return r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"label",title:e.description},e.name,e.canBeEmpty&&r.a.createElement("abbr",{title:"Leave this field empty to disable this feature"},"*")),r.a.createElement("div",{className:"value-and-error"+t},r.a.createElement("div",{className:"value"},e.children),e.errorMessage&&r.a.createElement("div",{className:"error"},e.errorMessage)))}var Ee=n(9);function ve(e){return"TYPE_STRING_OR_NULL"===e||"TYPE_TIMEOUT_OR_NULL"===e||"TYPE_TEMPLATE_URL_PASS"===e||"TYPE_TEMPLATE_URL_USER_PASS"===e}function he(e,t){if(!ve(e)&&!t)return"Empty field is not allowed";switch(e){case"TYPE_STRING":case"TYPE_STRING_OR_NULL":return null;case"TYPE_TIMEOUT_OR_NULL":case"TYPE_TIMEOUT":return"TYPE_TIMEOUT_OR_NULL"!==e||t?function(e){var t=Number(e);if(isNaN(t))return"Not a valid number";if(t<0)return"Number can not be negative";return null}(t):null;case"TYPE_TEMPLATE_URL_PASS":case"TYPE_TEMPLATE_URL_USER_PASS":var n=["<password>"];return"TYPE_TEMPLATE_URL_USER_PASS"===e&&n.push("<username>"),function(e,t){try{new URL(e)}catch(s){return"Unvalid URL format"}var n,a=Object(Ee.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(e.indexOf(r)<0)return'The url should contain the placeholder "'.concat(r,'"')}}catch(o){a.e(o)}finally{a.f()}return null}(t,n);case"TYPE_REGEX":return function(e){try{return new RegExp(e),null}catch(t){return"Not a valid regular expression"}}(t);default:return console.error('Unknown type: "'.concat(e,'"')),"Internal error: unknown type"}}var fe,ge=[{title:"Grub greeting message",name:"grubGreetingDuration",description:"Defines how long the 'Welcome to GRUB!' message is shown",type:"TYPE_TIMEOUT"},{title:"Kernel load",name:"kernelLoadDuration",description:"Defines how long to wait after the 'Loading Linux <your_kernel_version_here> ...' line",type:"TYPE_TIMEOUT"},{title:"Initial ramdisk load",name:"initrdLoadDuration",description:"Defines how long to wait after the 'Loading initial ramdisk ...' line",type:"TYPE_TIMEOUT"},{title:"Kali boot animation",name:"plymountDuration",description:"Determines how long the boot animation should be shown",type:"TYPE_TIMEOUT"},{title:"Kali logo during shutdown",name:"shutdownDuration",description:"Sets how long the kali logo is shown before the computer is shut down",type:"TYPE_TIMEOUT"}],be=[{title:"Hostname",name:"hostname",description:"The hostname of the Kali Linux. It is shown on the login screen.",type:"TYPE_STRING"},{title:"Initial screen",name:"initialScreen",description:"Select which state the computer should start in",type:"TYPE_INITIAL_SCREEN"},{title:"Grub timeout",name:"bootTimeout",description:"If the user does not press a key after X seconds, the first boot menu entry gets executed automatically",type:"TYPE_TIMEOUT_OR_NULL"},{title:"Crypt device (root partition)",name:"cryptDevice",description:"The name of the encrypted partition. Setting this option will cause the decrypt disk screen to be shown",type:"TYPE_STRING_OR_NULL"}],Oe=[{title:"Check disk password URL",name:"checkDecryptionPasswordUrl",description:"The URL to send a request to when the user tries to decrypt the disk",type:"TYPE_TEMPLATE_URL_PASS"},{title:"Check login URL",name:"checkLoginCredentialsUrl",description:"The URL to send a request to when the user tries to log in",type:"TYPE_TEMPLATE_URL_USER_PASS"},{title:"Server verification timeout",name:"serverRequestTimeout",description:"How long to wait for a response from the server, before falling back on the regular expression check. Setting the value too high can cause a visible delay if the server is not reachable / responding",type:"TYPE_TIMEOUT"}],we=[{title:"Decryption password",name:"validDecryptionPasswordRegex",description:"Accept the disk password if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login username",name:"validLoginUsernameRegex",description:"Accept the login username if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login password",name:"validLoginPasswordRegex",description:"Accept the login password if it matches this regular expression",type:"TYPE_REGEX"}],_e=[].concat(be,ge,Oe,we),Te=new Map,ye=Object(Ee.a)(_e);try{for(ye.s();!(fe=ye.n()).done;){var Se=fe.value;Te.set(Se.name,Se)}}catch(ke){ye.e(ke)}finally{ye.f()}function Re(e){return{checkLoginCredentialsUrl:Ue(e.checkLoginCredentialsUrl),checkDecryptionPasswordUrl:Ue(e.checkDecryptionPasswordUrl),serverRequestTimeout:(t=e.serverRequestTimeout,""+t),validLoginUsernameRegex:Le(e.validLoginUsernameRegex),validLoginPasswordRegex:Le(e.validLoginPasswordRegex),validDecryptionPasswordRegex:Le(e.validDecryptionPasswordRegex)};var t}function Ue(e){return e||""}function Le(e){return e.source}function je(e){return e||null}var Ne=Re(R),Pe=(r.a.Component,n(45),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},Object(d.a)(a).debugIsInitialized=!1,a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(w,null),r.a.createElement(K,{alwaysShowContents:!0},this.renderContent()))}},{key:"renderContent",value:function(){return this.debugIsInitialized||(this.debugIsInitialized=!0,D(R)),r.a.createElement(de,null)}}]),n}(r.a.Component)),xe=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{isRunning:!e.var.isFinished,isFullscreen:e.fullscreen.active,showSetup:!e.isSetupDone,constants:e.const})}))(Pe);window.addEventListener("popstate",(function(e){e.state&&e.state.stage?M(!0):M(!1),console.log("[Event: popstate] state: "+JSON.stringify(e.state))})),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:N},r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.2632feb2.chunk.js.map