(this.webpackJsonpreact_fake_win10_login=this.webpackJsonpreact_fake_win10_login||[]).push([[0],{17:function(e,t,n){e.exports=n.p+"static/media/background.0099788b.jpg"},18:function(e,t,n){e.exports=n.p+"static/media/user.b34dc68a.png"},27:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),o=n.n(s),c=n(2);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(1),l=n(3),u=n(4),d=n(6),p=n(5),E=n(26),m=n.n(E),v=n(8),h=n.n(v),f=n(14);function g(e,t){switch(e||(console.warn("No state was supplied to reducer. Falling back to default values"),e=O),t.type){case"INITIAL_SETUP":var n=t.payload;return{const:n,var:_(n.initialScreen,T,n),isSetupDone:!0,fullscreen:Object(i.a)(Object(i.a)({},e.fullscreen),{},{requested:!0})};case"SET_SETUP_DONE":var a=t.payload;return Object(i.a)(Object(i.a)({},e),{},{isSetupDone:a});case"SET_FULLSCREEN_IS_ACTIVE":var r=t.payload;return Object(i.a)(Object(i.a)({},e),{},{fullscreen:{requested:r,active:r}});case"SET_FULLSCREEN_IS_REQUESTED":var s=t.payload;return Object(i.a)(Object(i.a)({},e),{},{fullscreen:Object(i.a)(Object(i.a)({},e.fullscreen),{},{requested:s})});default:return Object(i.a)(Object(i.a)({},e),{},{var:b(e.var,t,e.const)})}}function b(e,t,n){return e=function(e,t,n){switch(t.type){case"SET_SCREEN":return _(t.payload,e,n);case"RESET_STATE":return _(T.screen.name,T,n)}return e}(e=function(e,t){switch(t.type){case"SET_LOGIN_USERNAME":var n=t.payload;return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{username:n})});case"SET_LOGIN_PASSWORD":var a=t.payload;return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{password:a})});case"TOGGLE_REVEAL_PASSWORD":return Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{revealPassword:!e.login.revealPassword})});case"TRY_LOGIN":var r=t.payload,s=Object(i.a)(Object(i.a)({},e),{},{login:Object(i.a)(Object(i.a)({},e.login),{},{revealPassword:!1,failed:!r,attempts:e.login.attempts+1}),isFinished:r});return r||(s.login.password=""),s;default:return e}}(e,t),t,n)}function _(e,t,n){var a="SCREEN_SUSPEND"===e||"SCREEN_COVER"===e?t.screen.name:null;return Object(i.a)(Object(i.a)({},t),{},{screen:{name:e,changeTime:new Date},previousScreen:a})}var w={checkLoginCredentialsUrl:"http://localhost:3333/login.json?u=<username>&p=<password>",checkDecryptionPasswordUrl:"http://localhost:3333/disk.json?p=<password>",validLoginUsernameRegex:RegExp("^.+$"),validLoginPasswordRegex:RegExp("^.+$"),validDecryptionPasswordRegex:RegExp("^$"),serverRequestTimeout:2,initialScreen:"SCREEN_LOGIN",coverUrl:"https://www.google.com/webhp?igu=1",coverFakeUrl:"/www.google.com",coverFakeTitle:"Google"},T={screen:{name:"SCREEN_LOCKED",changeTime:new Date},login:{revealPassword:!1,username:"",password:"",openMenu:null,failed:!1,attempts:0},previousScreen:null,isFinished:!1},O={const:w,var:T,isSetupDone:!1,fullscreen:{requested:!1,active:!1}},y=void 0;if(window.__REDUX_DEVTOOLS_EXTENSION__){y=window.__REDUX_DEVTOOLS_EXTENSION__({trace:!1,traceLimit:25})}var S=Object(f.b)(g,O,y),R=S;function L(e){R.dispatch(e)}function N(){L({type:"TOGGLE_REVEAL_PASSWORD"})}function P(e){L({type:"SET_LOGIN_OPEN_MENU",payload:e})}function j(e){L({type:"SET_SCREEN",payload:e})}function U(e){L({type:"SET_SETUP_DONE",payload:e})}var k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isFullscreen;return!0===this.props.alwaysShowContents&&(e=!0),r.a.createElement("div",null,r.a.createElement(h.a,{handleKeys:["ctrl+space"],handleFocusableElements:!0,onKeyEvent:function(){L({type:"SET_FULLSCREEN_IS_REQUESTED",payload:!0})}}),r.a.createElement(m.a,{enabled:this.props.requestFullscreen,onChange:function(e){L({type:"SET_FULLSCREEN_IS_ACTIVE",payload:e})}},e&&this.props.children))}}]),n}(a.Component),x=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{requestFullscreen:e.fullscreen.requested,isFullscreen:e.fullscreen.active})}))(k),C=n(17),I=n.n(C),D=n(18),M=n.n(D);var A=[I.a,M.a].filter((function(e){return!e.startsWith("data:image")}));function Y(e){return r.a.createElement("img",{key:e,src:e,alt:""})}function G(){return r.a.createElement("div",{className:"preload-images"},A.map(Y))}var F=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).closeMenu=function(){e.props.isMenuOpen&&P(null)},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-login"},r.a.createElement("img",{className:"fill-screen",src:I.a,alt:""}),r.a.createElement("div",{className:"fill-screen v-flex",onClick:this.closeMenu},r.a.createElement("div",{className:"expand"}),this.props.children,r.a.createElement("div",{className:"expand v-flex"},r.a.createElement("div",{className:"expand"}),r.a.createElement("div",{className:"button-bar"},"Internet, Battery"))))}}]),n}(r.a.Component),q=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{isMenuOpen:null!==e.var.login.openMenu})}))(F),K=n(21),V=n.n(K),W=function(){return r.a.createElement("div",{className:"screen-login-locked v-flex"},r.a.createElement(h.a,{handleKeys:["all"],handleFocusableElements:!0,onKeyEvent:function(){return j("SCREEN_LOGIN")}}),r.a.createElement("div",{className:"expand"}),r.a.createElement("div",{className:"clock"},r.a.createElement("div",{className:"clock-time"},r.a.createElement(V.a,{format:"HH:mm"})),r.a.createElement("div",{className:"clock-date"},r.a.createElement(V.a,{format:"dddd, D MMMM"}))))},X=n(7),B=n.n(X),H=n(11),$=n(22);function J(){return(J=Object(H.a)(B.a.mark((function e(t){var n,a,r,s,o,c,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.var.login.username,a=t.var.login.password,r=t.const.checkLoginCredentialsUrl,s=t.const.serverRequestTimeout,null===r){e.next=12;break}return e.next=7,Q(Z(r,n,a),s);case 7:if(null===(o=e.sent)){e.next=10;break}return e.abrupt("return",o);case 10:e.next=14;break;case 12:return e.next=14,ae(1e3);case 14:return c=Boolean(n.match(t.const.validLoginUsernameRegex)),i=Boolean(a.match(t.const.validLoginPasswordRegex)),console.log("Comparing login credentials to regex.\n - validUsername: ".concat(c,"\n - validPassword: ").concat(i)),e.abrupt("return",c&&i);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return z.apply(this,arguments)}function z(){return(z=Object(H.a)(B.a.mark((function e(t,n){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n&&n>0)){e.next=8;break}return a=Math.round(1e3*n),e.next=5,Object($.timeout)(t,a);case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,t;case 10:return e.abrupt("return",e.sent);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.t0 instanceof $.TimeoutError?console.info("Promise timed out after ".concat(n," seconds")):console.error("Promise resulted in error:",e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Z(e,t,n){return ee.apply(this,arguments)}function ee(){return(ee=Object(H.a)(B.a.mark((function e(t,n,a){var r,s,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace("<password>",a),null!==n&&(r=r.replace("<username>",n)),console.log('Checking credentials via url: "'.concat(r,'"')),e.next=5,te(r);case 5:return s=e.sent,o=s&&void 0!==s.isValid?s.isValid:null,console.log("Server response:",o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(H.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((n=e.sent).ok){e.next=7;break}return console.error('HTTP request failed: url="'.concat(t,'" response_status: "').concat(n.statusText,'"')),e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ae(e){return new Promise((function(t){return setTimeout(t,e)}))}var re=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{revealPassword:!1,password:e.var.login.password,failedLogin:e.var.login.failed,reduxState:e})}))((function(e){var t=e.revealPassword?"text":"password",n=e.password&&!e.revealPassword,a=function(t){(function(e){return J.apply(this,arguments)})(e.reduxState).then((function(e){L({type:"TRY_LOGIN",payload:e})}))};return r.a.createElement("div",{className:"password-dialog"},r.a.createElement("div",{className:"user-icon"},r.a.createElement("img",{src:M.a,alt:""})),r.a.createElement("div",{className:"user-name"},r.a.createElement("span",null,"TODO: User")),r.a.createElement(h.a,{handleKeys:["enter"],onKeyEvent:a},r.a.createElement("div",{className:"password-div h-flex"},r.a.createElement("div",{className:"password-wrapper h-flex"},r.a.createElement("input",{type:t,value:e.password,onChange:function(e){L({type:"SET_LOGIN_PASSWORD",payload:e.target.value})},placeholder:"Password",autoFocus:!0,autoComplete:"off"}),n&&r.a.createElement("div",{className:"button reveal",onClick:N},r.a.createElement("span",{role:"img","aria-label":"show"},"\ud83d\udc41\ufe0f"))),r.a.createElement("div",{className:"button login",onClick:a},r.a.createElement("span",{role:"img","aria-label":"go"},"\ud83e\udc62")))),e.failedLogin&&r.a.createElement("div",{className:"reset-password"},r.a.createElement("span",{onClick:function(e){return j("SCREEN_PASSWORD_RESET")}},"Reset password")))}));function se(e){0}var oe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-manager fill-screen",onContextMenu:se},this.renderContent())}},{key:"renderContent",value:function(){switch(this.props.screen){case"SCREEN_LOCKED":return r.a.createElement(q,null,r.a.createElement(W,null));case"SCREEN_LOGIN":return r.a.createElement(q,null,r.a.createElement(re,null));default:return r.a.createElement("h1",{style:{color:"red"}},'Unknown screen: "'.concat(this.props.screen,'"'))}}}]),n}(r.a.Component),ce=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{screen:e.var.screen.name})}))(oe);var ie=n(10);function le(e){var t=e.errorMessage?" has-error":"";return r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"label",title:e.description},e.name,e.canBeEmpty&&r.a.createElement("abbr",{title:"Leave this field empty to disable this feature"},"*")),r.a.createElement("div",{className:"value-and-error"+t},r.a.createElement("div",{className:"value"},e.children),e.errorMessage&&r.a.createElement("div",{className:"error"},e.errorMessage)))}var ue=n(9);function de(e){return"TYPE_STRING_OR_NULL"===e||"TYPE_TIMEOUT_OR_NULL"===e||"TYPE_TEMPLATE_URL_PASS"===e||"TYPE_TEMPLATE_URL_USER_PASS"===e}function pe(e,t){if(!de(e)&&!t)return"Empty field is not allowed";switch(e){case"TYPE_STRING":case"TYPE_STRING_OR_NULL":return null;case"TYPE_TIMEOUT_OR_NULL":case"TYPE_TIMEOUT":return"TYPE_TIMEOUT_OR_NULL"!==e||t?function(e){var t=Number(e);if(isNaN(t))return"Not a valid number";if(t<0)return"Number can not be negative";return null}(t):null;case"TYPE_TEMPLATE_URL_PASS":case"TYPE_TEMPLATE_URL_USER_PASS":var n=["<password>"];return"TYPE_TEMPLATE_URL_USER_PASS"===e&&n.push("<username>"),function(e,t){try{new URL(e)}catch(s){return"Unvalid URL format"}var n,a=Object(ue.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(e.indexOf(r)<0)return'The url should contain the placeholder "'.concat(r,'"')}}catch(o){a.e(o)}finally{a.f()}return null}(t,n);case"TYPE_REGEX":return function(e){try{return new RegExp(e),null}catch(t){return"Not a valid regular expression"}}(t);default:return console.error('Unknown type: "'.concat(e,'"')),"Internal error: unknown type"}}var Ee,me=[{title:"Grub greeting message",name:"grubGreetingDuration",description:"Defines how long the 'Welcome to GRUB!' message is shown",type:"TYPE_TIMEOUT"},{title:"Kernel load",name:"kernelLoadDuration",description:"Defines how long to wait after the 'Loading Linux <your_kernel_version_here> ...' line",type:"TYPE_TIMEOUT"},{title:"Initial ramdisk load",name:"initrdLoadDuration",description:"Defines how long to wait after the 'Loading initial ramdisk ...' line",type:"TYPE_TIMEOUT"},{title:"Kali boot animation",name:"plymountDuration",description:"Determines how long the boot animation should be shown",type:"TYPE_TIMEOUT"},{title:"Kali logo during shutdown",name:"shutdownDuration",description:"Sets how long the kali logo is shown before the computer is shut down",type:"TYPE_TIMEOUT"}],ve=[{title:"Hostname",name:"hostname",description:"The hostname of the Kali Linux. It is shown on the login screen.",type:"TYPE_STRING"},{title:"Initial screen",name:"initialScreen",description:"Select which state the computer should start in",type:"TYPE_INITIAL_SCREEN"},{title:"Grub timeout",name:"bootTimeout",description:"If the user does not press a key after X seconds, the first boot menu entry gets executed automatically",type:"TYPE_TIMEOUT_OR_NULL"},{title:"Crypt device (root partition)",name:"cryptDevice",description:"The name of the encrypted partition. Setting this option will cause the decrypt disk screen to be shown",type:"TYPE_STRING_OR_NULL"}],he=[{title:"Check disk password URL",name:"checkDecryptionPasswordUrl",description:"The URL to send a request to when the user tries to decrypt the disk",type:"TYPE_TEMPLATE_URL_PASS"},{title:"Check login URL",name:"checkLoginCredentialsUrl",description:"The URL to send a request to when the user tries to log in",type:"TYPE_TEMPLATE_URL_USER_PASS"},{title:"Server verification timeout",name:"serverRequestTimeout",description:"How long to wait for a response from the server, before falling back on the regular expression check. Setting the value too high can cause a visible delay if the server is not reachable / responding",type:"TYPE_TIMEOUT"}],fe=[{title:"Decryption password",name:"validDecryptionPasswordRegex",description:"Accept the disk password if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login username",name:"validLoginUsernameRegex",description:"Accept the login username if it matches this regular expression",type:"TYPE_REGEX"},{title:"Login password",name:"validLoginPasswordRegex",description:"Accept the login password if it matches this regular expression",type:"TYPE_REGEX"}],ge=[].concat(ve,me,he,fe),be=new Map,_e=Object(ue.a)(ge);try{for(_e.s();!(Ee=_e.n()).done;){var we=Ee.value;be.set(we.name,we)}}catch(Pe){_e.e(Pe)}finally{_e.f()}function Te(e){return{checkLoginCredentialsUrl:Oe(e.checkLoginCredentialsUrl),checkDecryptionPasswordUrl:Oe(e.checkDecryptionPasswordUrl),serverRequestTimeout:(t=e.serverRequestTimeout,""+t),validLoginUsernameRegex:ye(e.validLoginUsernameRegex),validLoginPasswordRegex:ye(e.validLoginPasswordRegex),validDecryptionPasswordRegex:ye(e.validDecryptionPasswordRegex)};var t}function Oe(e){return e||""}function ye(e){return e.source}function Se(e){return e||null}var Re=Te(w),Le=(r.a.Component,n(44),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(G,null),r.a.createElement(x,{alwaysShowContents:!0},this.renderContent()))}},{key:"renderContent",value:function(){return r.a.createElement(ce,null)}}]),n}(r.a.Component)),Ne=Object(c.b)((function(e,t){return Object(i.a)(Object(i.a)({},t),{},{isRunning:!e.var.isFinished,isFullscreen:e.fullscreen.active,showSetup:!e.isSetupDone,constants:e.const})}))(Le);window.addEventListener("popstate",(function(e){e.state&&e.state.stage?U(!0):U(!1),console.log("[Event: popstate] state: "+JSON.stringify(e.state))})),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:S},r.a.createElement(Ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.3eecf183.chunk.js.map